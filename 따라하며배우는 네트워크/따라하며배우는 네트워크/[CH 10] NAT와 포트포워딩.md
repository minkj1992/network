# [CH 10] NAT와 포트포워딩

## NAT
> 3, 4 계층 프로토콜을 다시 작성하는 것 (NAT Table의 가상 연결에 따라서)
`NAT`(Network Address Translation)은 **IP 패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소 등을 `재기록`** 하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술을 뜻한다.

패킷에 변화가 생기기 때문에 IP나 TCP/UDP의 `checksum`도 다시 계산되어 재기록한다.

`NAT`를 이용하는 이유는 대개 사설 네트워크에 속한 여러 개의 `Host`가 하나의 `공인 IP` 주소를 사용하여 인터넷에 접속하기 위함이다.

**하지만 꼭 사설 IP를 공인IP로 변환 하는 데에만 사용하는 기술은 아니다**

## 포트 포워딩
- 정의
포트 포워딩 또는 포트 매핑은 패킷이 라우터나 방화벽과 같은 네트워크 장비를 가로지르는 동안 **특정 IP 주소와 포트 번호의 통신 요청을 특정 다른 IP와 포트 번호로 넘겨주는 ** 네트워크 주소 변환(NAT)의 응용이다.

이 기법은 `게이트웨이(외부망)`의 반대쪽에 위치한 `사설 네트워크`에 상주하는 호스트에 대한 서비스를 생성하기 위해 흔히 사용된다. 

- 필요성
`사설망 A(사설IP A) ` --->  `공유기(공인IP A)` <---> `공유기(공인IP B)` <--- `사설망 B(사설IP B)`

`사설망 A`에서 `사설망 B`로 데이터를 주고 받고 싶지만 `사설망 a`에는 `사설망 b`의 주소를 알지못한다. 왜냐하면 모든 공인 IP 주소는 라우터(공유기)에 존재하기 때문이다. 그러므로 사설망 a측에서 사설망으로 패킷을 보내지 않고, `공유기 b`로 패킷을 보내준 뒤, 포트포워딩 설정을 켜주면 **공유기 b에서 사설망 b로 패킷을 전달하는 기능**이 포트 포워딩이다.

## 실습
- 포트포워딩 설정해보기
- 사설 IP를 사용하는 서버로 접속해보기